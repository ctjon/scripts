#!/bin/sh
#
# Sync OpenWRT Repo Locally
# Ansible managed
#

export SRCDIR=rsync://downloads.openwrt.org/downloads/
export TGTDIR=/Volumes/Install/OpenWRT

echo "********************************************************************************"
echo "* UPDATING OpenWRT BINARIES                                                    *"
echo "********************************************************************************"
# set return code to be false to force first iteration of while loop ironically this give error cause it is an error:-)
$? = 1

while [ "$?" -ne "0" ]
do
        sleep 10
	rsync -aHKvz --keep-dirlinks --delete --delete-during --delete-excluded --progress \
        --include='targets/mvebu/cortexa9' \
        --include='releases/packages-*/mvebu/cortexa9' \
        --include='releases/faillogs-*/mvebu/cortexa9' \
        --include='targets/arm_cortex-a9' \
        --include='releases/packages-*/arm_cortex-a9' \
        --include='releases/faillogs-*/arm_cortex-a9' \
        --exclude='targets/aarch64_cortex-a53' \
        --exclude='releases/packages-*/aarch64_cortex-a53' \
        --exclude='releases/faillogs-*/aarch64_cortex-a53' \
        --exclude='targets/aarch64_cortex-a72' \
        --exclude='releases/packages-*/aarch64_cortex-a72' \
        --exclude='releases/faillogs-*/aarch64_cortex-a72' \
        --exclude='targets/aarch64_generic' \
        --exclude='releases/packages-*/aarch64_generic' \
        --exclude='releases/faillogs-*/aarch64_generic' \
        --exclude='targets/apm821xx' \
        --exclude='releases/packages-*/apm821xx' \
        --exclude='releases/faillogs-*/apm821xx' \
        --exclude='targets/arc_arc700' \
        --exclude='releases/packages-*/arc_arc700' \
        --exclude='releases/faillogs-*/arc_arc700' \
        --exclude='targets/arc_archs' \
        --exclude='releases/packages-*/arc_archs' \
        --exclude='releases/faillogs-*/arc_archs' \
        --exclude='targets/arc770' \
        --exclude='releases/packages-*/arc770' \
        --exclude='releases/faillogs-*/arc770' \
        --exclude='targets/archs38' \
        --exclude='releases/packages-*/archs38' \
        --exclude='releases/faillogs-*/archs38' \
        --exclude='targets/armvirt' \
        --exclude='releases/packages-*/armvirt' \
        --exclude='releases/faillogs-*/armvirt' \
        --exclude='targets/arm_arm1176jzf-s_vfp' \
        --exclude='releases/packages-*/arm_arm1176jzf-s_vfp' \
        --exclude='releases/faillogs-*/arm_arm1176jzf-s_vfp' \
        --exclude='targets/arm_arm926ej-s' \
        --exclude='releases/packages-*/arm_arm926ej-s' \
        --exclude='releases/faillogs-*/arm_arm926ej-s' \
        --exclude='targets/arm_cortex-a15_neon-vfpv4' \
        --exclude='releases/packages-*/arm_cortex-a15_neon-vfpv4' \
        --exclude='releases/faillogs-*/arm_cortex-a15_neon-vfpv4' \
        --exclude='targets/arm_cortex-a5_vfpv4' \
        --exclude='releases/packages-*/arm_cortex-a5_vfpv4' \
        --exclude='releases/faillogs-*/arm_cortex-a5_vfpv4' \
        --exclude='targets/arm_cortex-a7' \
        --exclude='releases/packages-*/arm_cortex-a7' \
        --exclude='releases/faillogs-*/arm_cortex-a7' \
        --exclude='targets/arm_cortex-a7_vfpv4' \
        --exclude='releases/packages-*/arm_cortex-a7_vfpv4' \
        --exclude='releases/faillogs-*/arm_cortex-a7_vfpv4' \
        --exclude='targets/arm_cortex-a7_neon-vfpv4' \
        --exclude='releases/packages-*/arm_cortex-a7_neon-vfpv4' \
        --exclude='releases/faillogs-*/arm_cortex-a7_neon-vfpv4' \
        --exclude='targets/arm_cortex-a8_vfpv3' \
        --exclude='releases/packages-*/arm_cortex-a8_vfpv3' \
        --exclude='releases/faillogs-*/arm_cortex-a8_vfpv3' \
        --exclude='targets/arm_cortex-a9_neon' \
        --exclude='releases/packages-*/arm_cortex-a9_neon' \
        --exclude='releases/faillogs-*/arm_cortex-a9_neon' \
        --exclude='targets/arm_cortex-a9_vfpv3-d16' \
        --exclude='releases/packages-*/arm_cortex-a9_vfpv3-d16' \
        --exclude='releases/faillogs-*/arm_cortex-a9_vfpv3-d16' \
        --exclude='targets/arm_fa526' \
        --exclude='releases/packages-*/arm_fa526' \
        --exclude='releases/faillogs-*/arm_fa526' \
        --exclude='targets/arm_mpcore' \
        --exclude='releases/packages-*/arm_mpcore' \
        --exclude='releases/faillogs-*/arm_mpcore' \
        --exclude='targets/arm_xscale' \
        --exclude='releases/packages-*/arm_xscale' \
        --exclude='releases/faillogs-*/arm_xscale' \
        --exclude='targets/at91' \
        --exclude='releases/packages-*/at91' \
        --exclude='releases/faillogs-*/at91' \
        --exclude='targets/ath25' \
        --exclude='releases/packages-*/ath25' \
        --exclude='releases/faillogs-*/ath25' \
        --exclude='targets/ath79' \
        --exclude='releases/packages-*/ath79' \
        --exclude='releases/faillogs-*/ath79' \
        --exclude='targets/bcm27xx' \
        --exclude='releases/packages-*/bcm27xx' \
        --exclude='releases/faillogs-*/bcm27xx' \
        --exclude='targets/bcm47xx' \
        --exclude='releases/packages-*/bcm47xx' \
        --exclude='releases/faillogs-*/bcm47xx' \
        --exclude='targets/bcm4908' \
        --exclude='releases/packages-*/bcm4908' \
        --exclude='releases/faillogs-*/bcm4908' \
        --exclude='targets/bcm53xx' \
        --exclude='releases/packages-*/bcm53xx' \
        --exclude='releases/faillogs-*/bcm53xx' \
        --exclude='targets/bcm63xx' \
        --exclude='releases/packages-*/bcm63xx' \
        --exclude='releases/faillogs-*/bcm63xx' \
        --exclude='targets/gemini' \
        --exclude='releases/packages-*/gemini' \
        --exclude='releases/faillogs-*/gemini' \
        --exclude='targets/i386_pentium4' \
        --exclude='releases/packages-*/i386_pentium4' \
        --exclude='releases/faillogs-*/i386_pentium4' \
        --exclude='targets/i386_pentium-mmx' \
        --exclude='releases/packages-*/i386_pentium-mmx' \
        --exclude='releases/faillogs-*/i386_pentium-mmx' \
        --exclude='targets/imx6' \
        --exclude='releases/packages-*/imx6' \
        --exclude='releases/faillogs-*/imx6' \
        --exclude='targets/ipq40xx' \
        --exclude='releases/packages-*/ipq40xx' \
        --exclude='releases/faillogs-*/ipq40xx' \
        --exclude='targets/ipq806x' \
        --exclude='releases/packages-*/ipq806x' \
        --exclude='releases/faillogs-*/ipq806x' \
        --exclude='targets/kirkwood' \
        --exclude='releases/packages-*/kirkwood' \
        --exclude='releases/faillogs-*/kirkwood' \
        --exclude='targets/lantiq' \
        --exclude='releases/packages-*/lantiq' \
        --exclude='releases/faillogs-*/lantiq' \
        --exclude='targets/layerscape' \
        --exclude='releases/packages-*/layerscape' \
        --exclude='releases/faillogs-*/layerscape' \
        --exclude='targets/malta' \
        --exclude='releases/packages-*/malta' \
        --exclude='releases/faillogs-*/malta' \
        --exclude='targets/mediatek' \
        --exclude='releases/packages-*/mediatek' \
        --exclude='releases/faillogs-*/mediatek' \
        --exclude='targets/mpc85xx' \
        --exclude='releases/packages-*/mpc85xx' \
        --exclude='releases/faillogs-*/mpc85xx' \
        --exclude='targets/mips_24kc' \
        --exclude='releases/packages-*/mips_24kc' \
        --exclude='releases/faillogs-*/mips_24kc' \
        --exclude='targets/mips_4kec' \
        --exclude='releases/packages-*/mips_4kec' \
        --exclude='releases/faillogs-*/mips_4kec' \
        --exclude='targets/mips64_octeonplus' \
        --exclude='releases/packages-*/mips64_octeonplus' \
        --exclude='releases/faillogs-*/mips64_octeonplus' \
        --exclude='targets/mipsel_24kc' \
        --exclude='releases/packages-*/mipsel_24kc' \
        --exclude='releases/faillogs-*/mipsel_24kc' \
        --exclude='targets/mipsel_24kc_24kf' \
        --exclude='releases/packages-*/mipsel_24kc_24kf' \
        --exclude='releases/faillogs-*/mipsel_24kc_24kf' \
        --exclude='targets/mipsel_74kc' \
        --exclude='releases/packages-*/mipsel_74kc' \
        --exclude='releases/faillogs-*/mipsel_74kc' \
        --exclude='targets/mipsel_mips32' \
        --exclude='releases/packages-*/mipsel_mips32' \
        --exclude='releases/faillogs-*/mipsel_mips32' \
        --exclude='targets/mips_mips32' \
        --exclude='releases/packages-*/mips_mips32' \
        --exclude='releases/faillogs-*/mips_mips32' \
        --exclude='targets/mvebu/cortexa53' \
        --exclude='releases/packages-*/mvebu/cortexa53' \
        --exclude='releases/faillogs-*/mvebu/cortexa53' \
        --exclude='targets/mvebu/cortexa72' \
        --exclude='releases/packages-*/mvebu/cortexa72' \
        --exclude='releases/faillogs-*/mvebu/cortexa72' \
        --exclude='targets/mxs' \
        --exclude='releases/packages-*/mxs' \
        --exclude='releases/faillogs-*/mxs' \
        --exclude='targets/octeon' \
        --exclude='releases/packages-*/octeon' \
        --exclude='releases/faillogs-*/octeon' \
        --exclude='targets/octeontx' \
        --exclude='releases/packages-*/octeontx' \
        --exclude='releases/faillogs-*/octeontx' \
        --exclude='targets/omap' \
        --exclude='releases/packages-*/omap' \
        --exclude='releases/faillogs-*/omap' \
        --exclude='targets/oxnas' \
        --exclude='releases/packages-*/oxnas' \
        --exclude='releases/faillogs-*/oxnas' \
        --exclude='targets/pistachio' \
        --exclude='releases/packages-*/pistachio' \
        --exclude='releases/faillogs-*/pistachio' \
        --exclude='targets/powerpc_464fp' \
        --exclude='releases/packages-*/powerpc_464fp' \
        --exclude='releases/faillogs-*/powerpc_464fp' \
        --exclude='targets/powerpc_8540' \
        --exclude='releases/packages-*/powerpc_8540' \
        --exclude='releases/faillogs-*/powerpc_8540' \
        --exclude='targets/ramips' \
        --exclude='releases/packages-*/ramips' \
        --exclude='releases/faillogs-*/ramips' \
        --exclude='targets/realtek' \
        --exclude='releases/packages-*/realtek' \
        --exclude='releases/faillogs-*/realtek' \
        --exclude='targets/rockchip' \
        --exclude='releases/packages-*/rockchip' \
        --exclude='releases/faillogs-*/rockchip' \
        --exclude='targets/sunxi' \
        --exclude='releases/packages-*/sunxi' \
        --exclude='releases/faillogs-*/sunxi' \
        --exclude='targets/tegra' \
        --exclude='releases/packages-*/tegra' \
        --exclude='releases/faillogs-*/tegra' \
        --exclude='targets/x86' \
        --exclude='releases/packages-*/x86' \
        --exclude='releases/faillogs-*/x86' \
        --exclude='targets/x86_64' \
        --exclude='releases/packages-*/x86_64' \
        --exclude='releases/faillogs-*/x86_64' \
        --exclude='targets/zynq' \
        --exclude='releases/packages-*/zynq' \
        --exclude='releases/faillogs-*/zynq' \
	--exclude='releases/19.*' \
	--exclude='releases/18.*' \
	--exclude='releases/17.*' \
	--exclude='*-SNAPSHOT*' \
	--exclude='snapshots/' \
	--exclude='*-rc?' \
	--exclude='releases/packages-19.*' \
	--exclude='releases/packages-18.*' \
	--exclude='releases/packages-17.*' \
	--exclude='releases/faillogs-19.*' \
	--exclude='releases/faillogs-18.*' \
	--exclude='releases/faillogs-17.*' \
 	$SRCDIR $TGTDIR
done

date
